---
title: 8086汇编总结-微型计算机概述
date: 2018-02-26
tags: 
    - 汇编
    - 计算机原理
categories: 
    - 编程与生活
---

# 目录

* 第一章  微型计算机概述
* 第二章  16位微处理器8086
* 第三章  指令系统
* 第四章  汇编语言程序设计
* 第五章  存储器
* 第六章  输入/输出接口设计
* 第七章  中断系统
* 第八章  可编程接口芯片
* 第九章  AD/DA 转换
* 第十章  串行通信

# 第一章  微型计算机概述

## 微型计算机基本组成：

**冯诺依曼结构**

* CPU（Central Processing Unit
 中央处理单元 ）
    - ALU (Arithmetic Logic Unit
 算术逻辑单元)
    - 控制器
* Memory
    - RAM (读写存储器）
    - ROM (只读存储器)
* I/O接口 - 主机与外设的匹配连接
* BUS（总线）：计算机用来传输信息的一组通信线
    - AB (地址总线)：用于传递地址信息，单向，成组使用，地址总线的宽度决定了CPU直接寻址内存的范围。如：8086有20根地址线，即地址总线宽度为20位，可寻址2^20B = 1MB
    - DB (数据总线)：用于传递数据信息，双向，成组使用，计算机的位一般是指数据总线的宽度。如：8086有16根数据线，因此8086为16位机
    - CB (控制总线)：用于传输控制信号，以便控制计算机各部件协调工作， 各自独立使用，有发出，也有接收。如：CPU向存储器发出的读信号、写信号
    - 地址数据复用总线：地址总线与数据总线共用一组通信线，*分时*传送地址，信息和数据信息（由同步信号区分），节省CPU引脚

## 微型计算机系统（MCS -- Micro-Computer System）

以微型计算机为主体，配上系统软件就构成微型计算机系统。

* 系统软件包括操作系统和一系列系统应用程序
    - 如编辑程序、编译程序、调试程序等
    - 有了系统软件才能发挥微机的硬件功能
* 外设
    - 输入设备：鼠标、键盘、扫描仪
    - 输出设备：显示器、打印机、投影仪

![IBM PC/XT系统板框图](/images/asm-1/ScreenShot00017.jpg)

## 微处理器、单板机和单片机概念

* 微处理器
    - 专指中央处理器(CPU)，是将计算机的运算器(ALU)和控制器集成在一个芯片上。
    - 如：8086，80386，Pentium，PII等
* 单板机
    - 将CPU、存储器、I/O口以及简单的外设集成在一块板上，是一个简单的计算机系统。
    - 如：TP801A等。
* 单片机
    - 将CPU、存储器、I/O口集成在一个芯片上。
    - 如：Intel MCS-48，MCS-51，MCS-96等

## 微型计算机发展

* CPU位数不断增加，集成度不断提高，频率不断提高
    - 计算机的位
        + CPU片内数据总线的宽度决定了计算机的位数
        + 如：8位，16位，32位，64位，128位
    - 准16位机
        + CPU片内数据线宽度为16位，片外数据线宽度为8位
        + 如：8088，8098
* 由单处理器向多处理器发展
* 指令系统由复杂指令集向精简指令集发展
    - 复杂指令集计算机（CISC – Complex Instruction Set Computer）
    - 精简指令集计算机（RISC – Reduced Instruction Set Computer）
    - Intel在Pentium之前的CPU均属于CISC体系，从Pentium开始将CISC和RISC相结合，Pentium大多数指令是精简指令，但仍保留了一部分复杂指令

## 计算机中的信息表示

1. 计算机使用二进制存储，但书写时常用16进制
    * 计算机内所有代码以二进制表示，机器码又称二进制码
    * 1位16进制数对应半个字节（4位二进制码）

    例：1000 0101 B  二进制；85 H  16进制

    *注：书写16进制数时，若最高位是字母，则前面加0，表示是数据，如0FEH*

    * 一些进制的简化符号:
        2进制 - B(Binary)、 16进制－ H(Hex)
        8进制 - O(Octal)、  10进制 - D(Decimal)

2. 无符号数表示
    - 二进制无符号数 — 码值与数值相等
        一个n位二进制无符号数表示的范围是0～(2^n - 1)

        例：8位二进制无符号数表示的范围是0～255，16位二进制无符号数表示的范围是0～65535

    - BCD码(Binary Coded Decimal) - 用半个字节表示1位十进制数
        - 压缩BCD码: 用1个字节表示2位BCD码，又称8421BCD码
        - 非压缩BCD码：用1个字节的低四位表示1位BCD码，高四位忽略

        例 00111001b 在压缩格式下表示：39；在非压缩格式下表示：9

3. 有符号数表示
    * 原码
        - 将最高位作为符号位，正数的符号位为0，负数的符号位为1，余下的其他位为数值位
    * 反码
        - 正数的反码与原码相同；
        - 负数的反码由该负数的原码按位取反(符号位除外)得到 
    * 补码
        - 正数的补码与原码相同。
        - 负数的补码由该负数的原码按位取反(符号位除外)加1得到
        - **计算机内有符号数默认用补码表示**

### 一个字节有符号数范围

原码表示： -127～+127  有+0，-0

    1111 1111b – 1000 0000b - 0000 0000b – 0111 1111 
    -127           -0           +0           +127

反码表示：-127～+127  有+0，-0

    1000 0000b – 1111 1111b – 0000 0000b – 0111 1111b
    -127            -0           +0           +127

补码表示：-128～+127  只有一个0

    1000 0000b – 1111 1111b - 0000 0000b – 0111 1111b
    -128           -1            0            127

一个字的补码表示范围: -32768 ~ +32767 (只有一个0)

    1000 0000 0000 0000 ~ 1111 1111 1111 1111
        -32768              -1
    0000 0000 0000 0000 ~ 0111 1111 1111 1111
        0                   +32767

**举例说明**

    计算机内一个字节为 81H => 1000 0001b
    二进制    129 （二进制无符号数）
    BCD码     81 （压缩格式BCD码）
    原码     -1
    反码     -126（1111 1110b —> 1000 0001b）
    补码     -127（1111 1111b —> 1000 0000b—>1000 0001b）

**一个代码，赋予不同类型，其数值不一样。而类型要由人编程指定**

**数学运算时，结果超出运算器所表示范围则会产生“溢出”**

* 无符号数：通过进位或借位标志C标记“溢出”，避免产生错误结果
* 有符号数：用标志O标记“溢出”，表示运算结果错误
    - 字节运算，结果超出-128～127，则为溢出
    - 字运算，结果超出-32768～32767，则为溢出
    - 一般可以直接判断运算过程来确定是否溢出 - 双高位判别法：最高位（符号位）是否有进借位Cs异或次高位（数值的最高位）是否有进借位Cp。溢出 = Cs xor Cp

### 字符代码

1. ASCII码 — 美国标准信息交换码
    - 用7位二进制数表示128个字符
        - 包含26个英文大、小写字母，数字0～9，符号和命令符等
    - ASCII码在计算机内用一个字节表示，*最高位一般为0，有时候用作校验位*，计算机与外设交换信息一般都用ASCII码
        + 如：字符显示器，字符打印机等
        + 注：需牢记字符 ‘0’～‘9’,‘A’～‘F’，‘a’～‘f’的ASCII码分别为30H～39H, 41H～46H， 61H～66H
1. 汉字内码
    - GB2312定义了6763个汉字，其中一级字库3755字，二级字库3008字
    - 其他编码方式

## 硬件基础知识补充

计算机硬件主要由 **逻辑门、触发器（D触发器）、三态门**构成，使用器件为 *CMOS、TTL和NMOS*。

TTL和CMOS电平范围如下表所示：

![TTL和CMOS电平范围](/images/asm-1/ScreenShot00018.jpg)

要了解逻辑电平的内容，首先要知道以下几个概念的含义：

1. 输入高电平（ViH）： 保证逻辑门输入为高电平时所允许的最小输入电压，当输入电平高于ViH时，则认为输入电平为高电平。 
1. 输入低电平（ViL）：保证逻辑门的输入为低电平时所允许的最大输入电压，当输入电平低于ViL时，则认为输入电平为低电平。 
1. 输出高电平（VoH）：保证逻辑门的输出为高电平时的最小输出电压，逻辑门的输出为高电平时的电平值都必须大于此VoH。 
1. 输出低电平（VoL）：保证逻辑门的输出为低电平时的最大输出电压，逻辑门的输出为低电平时的电平值都必须小于此VoL。 
1. 阀值电平 (Vt)： 数字电路芯片都存在一个阈值电平，就是电路刚刚勉强能翻转动作时的电平。它是一个界于ViL、ViH之间的电压值，对于CMOS电路的阈值电平，基本上是二分之一的电源电压值，但要保证稳定的输出，则必须要求输入高电平> ViH，输入低电平 < ViL，而如果输入电平在阈值上下，也就是ViL～ViH这个区域，电路的输出会处于不稳定状态 

### 逻辑门

重点在于其图像。**直与弯或**。

![与逻辑](/images/asm-1/ScreenShot00019.jpg)
![或逻辑](/images/asm-1/ScreenShot00020.jpg)
![输出门](/images/asm-1/ScreenShot00021.jpg)

### 三态缓冲器

1. 三态门
    
    ![三态门](/images/asm-1/ScreenShot00022.jpg)

2. 单向三态缓冲器 — 74LS244

    74LS244为TTL的单向三态缓冲器，有两个三态控制使能引脚G1和G2分别控制4个三态门

3. 双向三态缓冲器 — 74LS245或INTEL 8286

    74LS245为TTL双向三态缓冲器，有控制引脚DIR和EN

### 锁存器

1. D触发器
1. 具有异步清零的TTL上升沿锁存器－74LS273

    当CLK上升沿到来时，将输入端的数据D0～D7锁存到输出端Q0～Q7，当CLR为低电平时将锁存器输出清零（具体逻辑可见对应的芯片图）

1. 具有缓冲输出的TTL低电平锁存器－74LS373或INTEL8282

    * OE为低电平时，输出三态门打开，此时LE为高电平，Q7～Q0跟随D7～D0；LE为低电平，数据锁存
    * OE为高电平时，输出Q7～Q0为三态

## 计算机内的总线连接

为减少计算机内各部件之间的连线，采用总线结构，使各部件共用一组数据线。

* **输入数据到总线的部件，一定要使用三态电路作缓冲**
    - 需输出数据时，打开三态门，占用总线，传输信息
    - 不输出时，关闭三态门，使输出处于高阻状态，让出总线，不影响其它部件使用总线
* **从总线输出数据的部件，常采用D触发器锁存总线数据**
* 常用总线技术
    - 时分技术：计算机内各部件之间的信息传送分时进行
    - 频分技术：CATV 有线电视，分频复用

### 类型

一个计算机系统包含多种类型总线，按 *所处位置*可分为：

1. 内部总线

    位于CPU芯片内，用于连接片内各功能部件的总线
    内部总线的对外引线叫做CPU总线

2. 局部总线

    位于主机板上，用于连接主机板上各个主要部件，并通过扩展槽连接各种适配器（显卡、网卡、声卡）

    常见的有ISA、EISA、PCI总线

    - ISA — Industry Standard Architecture
    - EISA — Extension Industry Standard Architecture
    - PCI — Peripheral Component Interconnect

3. 系统总线

    位于机箱底板，多个CPU插件板以此互相连接，在PC机中，一般不用，常见的有MULTIBUS、VME等

4. 外部总线

    是微机与外部设备之间或几个微机系统之间的通信总线，如：

    * IDE (Integrated Drive Electronic)总线，专用于连接硬盘
    * SCSI (Small Computer System Interface)，专用于连接硬盘
    * Centronics总线，用于与并行打印机连接
    * USB (Universal Serial Bus)总线，用于连接USB设备

### 总线性能

主要从三方面来衡量

1. 总线宽度：指总线一次可以同时传输的数据位数
2. 
    如：ISA为16位总线，一次可传输16位二进制数，EISA、PCI为32位总线

2. 总线频率：指总线每秒能传输数据的次数

    如：ISA、EISA的频率为8MHz，PCI的频率为33MHz，PCI-2的频率为66MHz

3. 传输率：指每秒钟能够传输的字节数，用MB/s表示

    传输率 = 宽度/8 ×频率

    例：PCI总线宽度为32位，频率为33MHz，则传输率 = 32b / 8 ×33 = 132MB/s，即PCI总线每秒能够传输132M字节

### 微机的层次化总线

![微机的层次化总线](/images/asm-1/ScreenShot00023.jpg)

1. CPU总线

    * CPU芯片内部总线的对外引线
    * 连接与CPU最密切、速度最快的部件，如二级Cache

2. PCI总线控制器

    * 像桥梁一样，一边连接CPU总线，一边连接CPU访问相对频繁、速度相对较快的部件，又称“PCI桥”
    
        如：通过PCI总线连接主存储器，通过AGP总线连接高速图形卡

    * 可级联下一级PCI总线控制器，形成多级PCI总线，容纳更多PCI卡

3. PCI转换桥

    完成PCI总线与ISA或EISA总线的连接转换

4. ISA总线：总线宽度16位，总线频率8MHz，传输率16MB/s

    * 24位地址线，16位数据线
    * 由主槽和扩展槽两部分组成，主槽为62脚，对应早期IBM PC/XT系统的62芯总线槽，扩展槽为36脚
    * 为和大量ISA适配卡兼容，目前计算机仍然通过“桥”来扩展ISA总线

5. EISA总线：是ISA的扩展，总线宽度32位，总线频率8MHz，传输率32MB/s

    * 32位地址线，32位数据线，能自动进行8位、16位、32位数据访问
    * 共198条信号线，98条为ISA原有的，扩展了100条信号线

6. PCI总线：目前微机中应用最广泛的局部总线

    * 总线宽度32位，总线频率33MHz，传输率为132MB/s
    * 支持即插即用功能

```
面对更大数据量传送的需求，传统PCI总线已无法满足应用要求，因此现在的设计对其进行扩展，称作PCI-X总线：
PCI-X 66    64位     66MHz       Hot Plugging,       3.3 V   533MB/s
PCI-X 133   64位     133MHz      Hot Plugging,       3.3 V   1.06GB/s
PCI-X 266   64/16位  133MHz      Double Data Rate Hot Plugging, 
    3.3 & 1.5 V,   ECC supported    2.13GB/s （主要应用到DDR内存）
PCI-X 533   64/16位  133MHz      Quad Data Rate Hot Plugging, 
    3.3 & 1.5 V,   ECC supported    4.26GB/s （主要应用在DDR2内存）

说明：
1. PCI-X 266 用上Double Data Rate技术，让每一个时钟脉冲的上升与下降边缘都可以传输数据，所以有多出了一 倍的机会来传输数据
2. PCI-X 533规格更进一步采用每一个时钟脉冲可以传送四次（Quad Data Rate）的技术
```

